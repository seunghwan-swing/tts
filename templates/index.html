<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé§ SWING AI Voice Studio</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            /* Neumorphism ÏÉâÏÉÅ ÌåîÎ†àÌä∏ */
            --primary: #4f46e5;
            --secondary: #6366f1;
            --accent: #8b5cf6;
            --accent-light: #a78bfa;
            --openai: #10b981;
            --openai-dark: #059669;
            --success: #22c55e;
            --warning: #f59e0b;
            --error: #ef4444;

            /* Neumorphism Î∞∞Í≤Ω Î∞è ÌëúÎ©¥ */
            --background: #e0e7ff;
            --surface: #e0e7ff;
            --surface-light: #f1f5f9;
            --surface-dark: #cbd5e1;

            /* ÌÖçÏä§Ìä∏ ÏÉâÏÉÅ */
            --text: #1e293b;
            --text-secondary: #475569;
            --text-muted: #64748b;

            /* Neumorphism Í∑∏Î¶ºÏûê */
            --shadow-light: rgba(255, 255, 255, 0.7);
            --shadow-dark: rgba(148, 163, 184, 0.4);
            --shadow-inset-light: rgba(255, 255, 255, 0.9);
            --shadow-inset-dark: rgba(148, 163, 184, 0.3);

            /* Í∏∞Î≥∏ ÏÑ§Ï†ï */
            --border-radius: 20px;
            --border-radius-large: 30px;
            --border-radius-small: 12px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #e0e7ff 0%, #f1f5f9 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text);
            line-height: 1.6;
            font-size: 16px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }

        /* Neumorphism Ïπ¥Îìú Í∏∞Î≥∏ Ïä§ÌÉÄÏùº */
        .neumorphism-card {
            background: var(--surface);
            border-radius: var(--border-radius);
            box-shadow:
                    12px 12px 24px var(--shadow-dark),
                    -12px -12px 24px var(--shadow-light);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .neumorphism-card:hover {
            transform: translateY(-2px);
            box-shadow:
                    16px 16px 32px var(--shadow-dark),
                    -16px -16px 32px var(--shadow-light);
        }

        /* Neumorphism Ïù∏ÏÖã Ïä§ÌÉÄÏùº */
        .neumorphism-inset {
            background: var(--surface);
            border-radius: var(--border-radius-small);
            box-shadow:
                    inset 6px 6px 12px var(--shadow-inset-dark),
                    inset -6px -6px 12px var(--shadow-inset-light);
            border: 1px solid rgba(148, 163, 184, 0.1);
        }

        /* Ìó§Îçî */
        .header {
            background: var(--surface);
            border-radius: var(--border-radius-large);
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow:
                    20px 20px 40px var(--shadow-dark),
                    -20px -20px 40px var(--shadow-light);
        }

        .header h1 {
            font-size: 3.5em;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 15px;
            letter-spacing: -0.02em;
            text-shadow: 2px 2px 4px rgba(148, 163, 184, 0.3);
        }

        .header p {
            font-size: 1.4em;
            font-weight: 400;
            color: var(--text-secondary);
            margin-bottom: 25px;
        }

        .header-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--surface);
            padding: 20px 25px;
            border-radius: var(--border-radius);
            text-align: center;
            min-width: 120px;
            box-shadow:
                    8px 8px 16px var(--shadow-dark),
                    -8px -8px 16px var(--shadow-light);
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-1px);
            box-shadow:
                    10px 10px 20px var(--shadow-dark),
                    -10px -10px 20px var(--shadow-light);
        }

        .stat-number {
            font-size: 2.2em;
            font-weight: 700;
            color: var(--accent);
            display: block;
            text-shadow: 1px 1px 2px rgba(139, 92, 246, 0.3);
        }

        .stat-label {
            font-size: 1em;
            color: var(--text-muted);
            margin-top: 5px;
        }

        /* Î©îÏù∏ Ìèº */
        .form-container {
            background: var(--surface);
            border-radius: var(--border-radius-large);
            padding: 40px;
            box-shadow:
                    20px 20px 40px var(--shadow-dark),
                    -20px -20px 40px var(--shadow-light);
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-group label {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            font-size: 1.2em;
            margin-bottom: 12px;
            color: var(--text);
        }

        .form-group label i {
            color: var(--accent-light);
            font-size: 1.2em;
            text-shadow: 1px 1px 2px rgba(167, 139, 250, 0.3);
        }

        /* ÌÖçÏä§Ìä∏ ÏóêÏñ¥Î¶¨Ïñ¥ */
        .text-input {
            width: 100%;
            min-height: 140px;
            padding: 20px;
            background: var(--surface);
            border: none;
            border-radius: var(--border-radius);
            color: var(--text);
            font-size: 17px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
            box-shadow:
                    inset 8px 8px 16px var(--shadow-inset-dark),
                    inset -8px -8px 16px var(--shadow-inset-light);
        }

        .text-input:focus {
            outline: none;
            box-shadow:
                    inset 10px 10px 20px var(--shadow-inset-dark),
                    inset -10px -10px 20px var(--shadow-inset-light),
                    0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .text-input::placeholder {
            color: var(--text-muted);
        }

        .char-counter {
            text-align: right;
            font-size: 1em;
            color: var(--text-muted);
            margin-top: 8px;
        }

        /* ÏòµÏÖò Í∑∏Î¶¨Îìú */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .option-card {
            background: var(--surface);
            border-radius: var(--border-radius);
            padding: 25px;
            transition: all 0.3s ease;
            box-shadow:
                    12px 12px 24px var(--shadow-dark),
                    -12px -12px 24px var(--shadow-light);
        }

        .option-card:hover {
            transform: translateY(-1px);
            box-shadow:
                    16px 16px 32px var(--shadow-dark),
                    -16px -16px 32px var(--shadow-light);
        }

        .custom-select {
            width: 100%;
            padding: 15px 20px;
            background: var(--surface);
            border: none;
            border-radius: var(--border-radius-small);
            color: var(--text);
            font-size: 17px;
            transition: all 0.3s ease;
            box-shadow:
                    inset 6px 6px 12px var(--shadow-inset-dark),
                    inset -6px -6px 12px var(--shadow-inset-light);
        }

        .custom-select:focus {
            outline: none;
            box-shadow:
                    inset 8px 8px 16px var(--shadow-inset-dark),
                    inset -8px -8px 16px var(--shadow-inset-light),
                    0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .custom-select option {
            background: var(--surface);
            color: var(--text);
        }

        /* Ï≤¥ÌÅ¨Î∞ïÏä§ Ïä§ÌÉÄÏùº */
        .service-selector {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .service-item {
            position: relative;
            flex: 1;
            min-width: 180px;
        }

        .service-checkbox {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .service-label {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: var(--surface);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 1.05em;
            box-shadow:
                    8px 8px 16px var(--shadow-dark),
                    -8px -8px 16px var(--shadow-light);
        }

        .service-label:hover {
            transform: translateY(-1px);
            box-shadow:
                    12px 12px 24px var(--shadow-dark),
                    -12px -12px 24px var(--shadow-light);
        }

        .service-checkbox:checked + .service-label {
            box-shadow:
                    inset 6px 6px 12px var(--shadow-inset-dark),
                    inset -6px -6px 12px var(--shadow-inset-light);
            background: linear-gradient(145deg, #d1d5db, #e5e7eb);
        }

        /* OpenAI Ï†ÑÏö© Ïä§ÌÉÄÏùº */
        .service-checkbox:checked + .service-label.openai-label {
            background: linear-gradient(145deg, #d1fae5, #ecfdf5);
            box-shadow:
                    inset 6px 6px 12px rgba(16, 185, 129, 0.2),
                    inset -6px -6px 12px rgba(255, 255, 255, 0.9);
        }

        .service-icon {
            font-size: 1.4em;
            color: var(--accent-light);
            text-shadow: 1px 1px 2px rgba(167, 139, 250, 0.3);
        }

        .openai-icon {
            color: var(--openai) !important;
            text-shadow: 1px 1px 2px rgba(16, 185, 129, 0.3);
        }

        /* ÏÑ§Ï†ï Ìå®ÎÑê */
        .settings-panel {
            background: var(--surface);
            border-radius: var(--border-radius);
            margin-top: 20px;
            overflow: hidden;
            box-shadow:
                    12px 12px 24px var(--shadow-dark),
                    -12px -12px 24px var(--shadow-light);
        }

        .settings-header {
            background: linear-gradient(145deg, #e2e8f0, #f8fafc);
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        }

        .settings-header:hover {
            background: linear-gradient(145deg, #cbd5e1, #e2e8f0);
        }

        .settings-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
            font-size: 1.2em;
            color: var(--text);
        }

        .toggle-icon {
            font-size: 1.1em;
            transition: transform 0.3s ease;
            color: var(--accent-light);
            text-shadow: 1px 1px 2px rgba(167, 139, 250, 0.3);
        }

        .toggle-icon.active {
            transform: rotate(180deg);
        }

        .settings-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.4s ease;
        }

        .settings-content.active {
            padding: 25px;
            max-height: 1000px;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .setting-item {
            background: var(--surface);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow:
                    6px 6px 12px var(--shadow-dark),
                    -6px -6px 12px var(--shadow-light);
            transition: all 0.3s ease;
        }

        .setting-item:hover {
            transform: translateY(-1px);
            box-shadow:
                    8px 8px 16px var(--shadow-dark),
                    -8px -8px 16px var(--shadow-light);
        }

        .setting-item label {
            font-size: 1.05em;
            font-weight: 500;
            color: var(--text);
            margin-bottom: 10px;
        }

        .setting-description {
            font-size: 0.95em;
            color: var(--text-muted);
            margin-top: 8px;
            line-height: 1.4;
        }

        /* Ïä¨ÎùºÏù¥Îçî Ïä§ÌÉÄÏùº */
        .range-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 10px 0;
        }

        .custom-range {
            flex: 1;
            height: 8px;
            background: var(--surface);
            border-radius: 4px;
            outline: none;
            appearance: none;
            box-shadow:
                    inset 3px 3px 6px var(--shadow-inset-dark),
                    inset -3px -3px 6px var(--shadow-inset-light);
        }

        .custom-range::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            background: linear-gradient(145deg, #f8fafc, #e2e8f0);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow:
                    4px 4px 8px var(--shadow-dark),
                    -4px -4px 8px var(--shadow-light);
        }

        .custom-range::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow:
                    6px 6px 12px var(--shadow-dark),
                    -6px -6px 12px var(--shadow-light);
        }

        .custom-range::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: linear-gradient(145deg, #f8fafc, #e2e8f0);
            border-radius: 50%;
            cursor: pointer;
            border: none;
            transition: all 0.2s ease;
            box-shadow:
                    4px 4px 8px var(--shadow-dark),
                    -4px -4px 8px var(--shadow-light);
        }

        .range-value {
            min-width: 60px;
            text-align: center;
            font-weight: 600;
            color: var(--accent);
            font-size: 1em;
            background: var(--surface);
            padding: 8px 12px;
            border-radius: var(--border-radius-small);
            box-shadow:
                    4px 4px 8px var(--shadow-dark),
                    -4px -4px 8px var(--shadow-light);
        }

        /* ÏÉùÏÑ± Î≤ÑÌäº */
        .generate-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(145deg, #4f46e5, #6366f1);
            border: none;
            border-radius: var(--border-radius);
            color: white;
            font-size: 1.3em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow:
                    12px 12px 24px var(--shadow-dark),
                    -12px -12px 24px var(--shadow-light);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow:
                    16px 16px 32px var(--shadow-dark),
                    -16px -16px 32px var(--shadow-light);
        }

        .generate-btn:active {
            transform: translateY(0px);
            box-shadow:
                    inset 6px 6px 12px rgba(79, 70, 229, 0.3),
                    inset -6px -6px 12px rgba(255, 255, 255, 0.1);
        }

        .generate-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        /* Ïä§ÌîºÎÑà */
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Í≤∞Í≥º ÏÑπÏÖò */
        .results {
            margin-top: 40px;
            padding: 30px;
            background: var(--surface);
            border-radius: var(--border-radius-large);
            box-shadow:
                    20px 20px 40px var(--shadow-dark),
                    -20px -20px 40px var(--shadow-light);
        }

        .results h3 {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 25px;
            text-align: center;
            color: var(--text);
            text-shadow: 2px 2px 4px rgba(148, 163, 184, 0.3);
        }

        .result-item {
            background: var(--surface);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            box-shadow:
                    8px 8px 16px var(--shadow-dark),
                    -8px -8px 16px var(--shadow-light);
        }

        .result-item:hover {
            transform: translateY(-1px);
            box-shadow:
                    12px 12px 24px var(--shadow-dark),
                    -12px -12px 24px var(--shadow-light);
        }

        .service-tag {
            background: linear-gradient(145deg, #8b5cf6, #a78bfa);
            color: white;
            padding: 10px 18px;
            border-radius: 20px;
            font-size: 1em;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            box-shadow:
                    4px 4px 8px rgba(139, 92, 246, 0.3),
                    -2px -2px 4px rgba(255, 255, 255, 0.1);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .service-tag.openai-tag {
            background: linear-gradient(145deg, #10b981, #34d399);
            box-shadow:
                    4px 4px 8px rgba(16, 185, 129, 0.3),
                    -2px -2px 4px rgba(255, 255, 255, 0.1);
        }

        .audio-player {
            width: 100%;
            margin: 15px 0;
            border-radius: var(--border-radius);
            overflow: hidden;
            filter: drop-shadow(4px 4px 8px var(--shadow-dark));
        }

        .control-buttons {
            display: flex;
            gap: 12px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 14px 22px;
            border: none;
            border-radius: var(--border-radius-small);
            font-size: 1em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow:
                    6px 6px 12px var(--shadow-dark),
                    -6px -6px 12px var(--shadow-light);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .control-btn:hover {
            transform: translateY(-1px);
            box-shadow:
                    8px 8px 16px var(--shadow-dark),
                    -8px -8px 16px var(--shadow-light);
        }

        .control-btn:active {
            transform: translateY(0px);
            box-shadow:
                    inset 3px 3px 6px var(--shadow-inset-dark),
                    inset -3px -3px 6px var(--shadow-inset-light);
        }

        .download-btn {
            background: linear-gradient(145deg, #22c55e, #16a34a);
            color: white;
        }

        .play-btn {
            background: linear-gradient(145deg, #f59e0b, #d97706);
            color: white;
        }

        .cleanup-btn {
            background: linear-gradient(145deg, #ef4444, #dc2626);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow:
                    8px 8px 16px var(--shadow-dark),
                    -8px -8px 16px var(--shadow-light);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .cleanup-btn:hover {
            transform: translateY(-1px);
            box-shadow:
                    12px 12px 24px var(--shadow-dark),
                    -12px -12px 24px var(--shadow-light);
        }

        /* ÏÑúÎπÑÏä§ Í∑∏Î£π Ìó§Îçî */
        .service-group {
            margin-bottom: 30px;
        }

        .service-group-header {
            background: var(--surface);
            border-radius: var(--border-radius);
            padding: 15px 20px;
            margin-bottom: 15px;
            box-shadow:
                    8px 8px 16px var(--shadow-dark),
                    -8px -8px 16px var(--shadow-light);
        }

        .service-group-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.3em;
            font-weight: 600;
            color: var(--text);
        }

        .service-group-count {
            background: linear-gradient(145deg, #8b5cf6, #a78bfa);
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 500;
            margin-left: auto;
            box-shadow:
                    3px 3px 6px rgba(139, 92, 246, 0.3),
                    -1px -1px 2px rgba(255, 255, 255, 0.1);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .service-group-count.openai-count {
            background: linear-gradient(145deg, #10b981, #34d399);
            box-shadow:
                    3px 3px 6px rgba(16, 185, 129, 0.3),
                    -1px -1px 2px rgba(255, 255, 255, 0.1);
        }

        .message {
            padding: 16px 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow:
                    6px 6px 12px var(--shadow-dark),
                    -6px -6px 12px var(--shadow-light);
        }

        .success-message {
            background: linear-gradient(145deg, #dcfce7, #f0fdf4);
            color: var(--success);
            border-left: 4px solid var(--success);
        }

        .error-message {
            background: linear-gradient(145deg, #fecaca, #fee2e2);
            color: var(--error);
            border-left: 4px solid var(--error);
        }

        .white-bg-black-text {
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            color: var(--text);
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 900;
            box-shadow:
                    2px 2px 4px var(--shadow-dark),
                    -2px -2px 4px var(--shadow-light);
        }

        /* Î∞òÏùëÌòï ÎîîÏûêÏù∏ */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 0;
            }

            .header h1 {
                font-size: 2.8em;
            }

            .header p {
                font-size: 1.2em;
            }

            .header-stats {
                flex-direction: column;
                gap: 15px;
            }

            .form-container {
                padding: 25px;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }

            .service-selector {
                flex-direction: column;
            }

            .settings-grid {
                grid-template-columns: 1fr;
            }

            .control-buttons {
                justify-content: center;
            }
        }

        /* Î∂ÄÎìúÎü¨Ïö¥ ÌéòÏù¥ÎìúÏù∏ Ìö®Í≥º */
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ÎØ∏ÏÑ∏Ìïú Ïï†ÎãàÎ©îÏù¥ÏÖò Ìö®Í≥º */
        @keyframes softPulse {
            0%, 100% {
                box-shadow:
                        12px 12px 24px var(--shadow-dark),
                        -12px -12px 24px var(--shadow-light);
            }
            50% {
                box-shadow:
                        16px 16px 32px var(--shadow-dark),
                        -16px -16px 32px var(--shadow-light);
            }
        }

        .generate-btn:not(:disabled):not(:active) {
            animation: softPulse 3s ease-in-out infinite;
        }
    </style>
</head>
<body>
<div class="container">
    <!-- Ìó§Îçî -->
    <div class="header neumorphism-card">
        <h1><i class="fas fa-microphone-alt"></i> <span class="white-bg-black-text">SWING</span> AI Voice Studio</h1>
        <p>ÎçîÏä§Ïúô AI ÏùåÏÑ± ÏÉùÏÑ± Ïä§ÌäúÎîîÏò§ + OpenAI TTS üöÄ</p>
        <div class="header-stats">
            <div class="stat-item">
                <span class="stat-number" id="totalGenerated">0</span>
                <div class="stat-label">ÏÉùÏÑ±Îêú ÏùåÏÑ±</div>
            </div>
            <div class="stat-item">
                <span class="stat-number">15</span>
                <div class="stat-label">ÏùåÏÑ± ÏòµÏÖò</div>
            </div>
            <div class="stat-item">
                <span class="stat-number">‚àû</span>
                <div class="stat-label">Í∞ÄÎä•ÏÑ±</div>
            </div>
        </div>
    </div>

    <!-- Î©îÏù∏ Ìèº -->
    <div class="form-container">
        <form id="ttsForm">
            <div class="form-group">
                <label for="text">
                    <i class="fas fa-edit"></i>
                    Î≥ÄÌôòÌï† ÌÖçÏä§Ìä∏
                </label>
                <textarea id="text"
                          class="text-input"
                          placeholder="Ïó¨Í∏∞Ïóê ÏùåÏÑ±ÏúºÎ°ú Î≥ÄÌôòÌïòÍ≥† Ïã∂ÏùÄ ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî..."
                          required
                          maxlength="4096"></textarea>
                <div class="char-counter">
                    <span id="charCount">0</span> / 4096 characters
                </div>
            </div>

            <div class="options-grid">
                <div class="option-card">
                    <label for="count">
                        <i class="fas fa-copy"></i>
                        ÏÉùÏÑ± Í∞úÏàò
                    </label>
                    <select id="count" class="custom-select">
                        <option value="1">1Í∞ú - Îπ†Î•∏ ÌÖåÏä§Ìä∏</option>
                        <option value="2">2Í∞ú - ÎπÑÍµêÌï¥Î≥¥Í∏∞</option>
                        <option value="3">3Í∞ú - Îã§ÏñëÌïú ÏòµÏÖò</option>
                        <option value="4">4Í∞ú - ÏôÑÎ≤ΩÌïú ÏÑ†ÌÉù</option>
                        <option value="5">5Í∞ú - Î™®Îì† Í∞ÄÎä•ÏÑ±</option>
                        <option value="6">6Í∞ú - Î™®Îì† ÏùåÏÑ±</option>
                        <option value="10">10Í∞ú - ÎåÄÎüâ ÌÖåÏä§Ìä∏</option>
                        <option value="20">20Í∞ú - ÌîÑÎ°úÎçïÏÖò Ï§ÄÎπÑ</option>
                        <option value="30">30Í∞ú - ÎåÄÍ∑úÎ™® ÏÉùÏÑ±</option>
                    </select>
                </div>

                <div class="option-card">
                    <label>
                        <i class="fas fa-robot"></i>
                        AI ÏÑúÎπÑÏä§ ÏÑ†ÌÉù
                    </label>
                    <div class="service-selector">
                        <div class="service-item">
                            <input type="checkbox" id="google" value="google" class="service-checkbox" checked onchange="toggleSettings()">
                            <label for="google" class="service-label">
                                <i class="fab fa-google service-icon"></i>
                                <div>
                                    <div>Google TTS</div>
                                    <small style="opacity: 0.8;">Î¨¥Î£å ‚Ä¢ Îã§Íµ≠Ïñ¥</small>
                                </div>
                            </label>
                        </div>
                        <div class="service-item">
                            <input type="checkbox" id="elevenlabs" value="elevenlabs" class="service-checkbox" onchange="toggleSettings()">
                            <label for="elevenlabs" class="service-label">
                                <i class="fas fa-brain service-icon"></i>
                                <div>
                                    <div>ElevenLabs</div>
                                    <small style="opacity: 0.8;">ÌîÑÎ¶¨ÎØ∏ÏóÑ ‚Ä¢ AI ÏùåÏÑ±</small>
                                </div>
                            </label>
                        </div>
                        <div class="service-item">
                            <input type="checkbox" id="openai" value="openai" class="service-checkbox" onchange="toggleSettings()">
                            <label for="openai" class="service-label openai-label">
                                <i class="fas fa-robot openai-icon service-icon"></i>
                                <div>
                                    <div>OpenAI TTS üöÄ</div>
                                    <small style="opacity: 0.8;">GPT ‚Ä¢ Ï¥àÍ≥†ÌíàÏßà</small>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Google TTS ÏÑ§Ï†ï Ìå®ÎÑê -->
            <div id="googleSettings" class="settings-panel">
                <div class="settings-header" onclick="togglePanel('googleSettings')">
                    <div class="settings-title">
                        <i class="fab fa-google"></i>
                        Google TTS ÏÑ§Ï†ï
                    </div>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </div>
                <div class="settings-content">
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label for="googleLang">
                                <i class="fas fa-globe"></i>
                                Ïñ∏Ïñ¥ ÏÑ†ÌÉù
                            </label>
                            <select id="googleLang" class="custom-select">
                                <option value="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥</option>
                                <option value="en">üá∫üá∏ English</option>
                                <option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
                                <option value="zh">üá®üá≥ ‰∏≠Êñá</option>
                                <option value="es">üá™üá∏ Espa√±ol</option>
                                <option value="fr">üá´üá∑ Fran√ßais</option>
                                <option value="de">üá©üá™ Deutsch</option>
                                <option value="it">üáÆüáπ Italiano</option>
                            </select>
                            <div class="setting-description">ÌÖçÏä§Ìä∏ Ïñ∏Ïñ¥Ïóê ÎßûÎäî Ïñ∏Ïñ¥Î•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</div>
                        </div>
                        <div class="setting-item">
                            <label for="googleSlow">
                                <i class="fas fa-tachometer-alt"></i>
                                ÏùΩÍ∏∞ ÏÜçÎèÑ
                            </label>
                            <select id="googleSlow" class="custom-select">
                                <option value="false">‚ö° Î≥¥ÌÜµ ÏÜçÎèÑ</option>
                                <option value="true">üêå ÎäêÎ¶∞ ÏÜçÎèÑ</option>
                            </select>
                            <div class="setting-description">ÎäêÎ¶∞ ÏÜçÎèÑÎäî Ïñ∏Ïñ¥ ÌïôÏäµÏóê Ïú†Ïö©Ìï©ÎãàÎã§</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ElevenLabs ÏÑ§Ï†ï Ìå®ÎÑê -->
            <div id="elevenlabsSettings" class="settings-panel" style="display: none;">
                <div class="settings-header" onclick="togglePanel('elevenlabsSettings')">
                    <div class="settings-title">
                        <i class="fas fa-brain"></i>
                        ElevenLabs Í≥†Í∏â ÏÑ§Ï†ï
                    </div>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </div>
                <div class="settings-content">
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label for="voice">
                                <i class="fas fa-user-friends"></i>
                                ÏùåÏÑ± Ï∫êÎ¶≠ÌÑ∞
                            </label>
                            <select id="voice" class="custom-select">
                                <option value="21m00Tcm4TlvDq8ikWAM">üë© Rachel - Îî∞ÎúªÌïú Ïó¨ÏÑ±</option>
                                <option value="AZnzlk1XvdvUeBnXmlld">üë© Domi - ÏûêÏã†Í∞ê ÏûàÎäî Ïó¨ÏÑ±</option>
                                <option value="EXAVITQu4vr4xnSDxMaL">üë© Bella - Î∂ÄÎìúÎü¨Ïö¥ Ïó¨ÏÑ±</option>
                                <option value="ErXwobaYiN019PkySvjV">üë® Antoni - Í∞êÏÑ±Ï†ÅÏù∏ ÎÇ®ÏÑ±</option>
                                <option value="MF3mGyEYCl7XYWbV9V6O">üë© Elli - ÌôúÎ∞úÌïú Ïó¨ÏÑ±</option>
                                <option value="TxGEqnHWrfWFTfGW9XjX">üë® Josh - ÏπúÍ∑ºÌïú ÎÇ®ÏÑ±</option>
                                <option value="VR6AewLTigWG4xSOukaG">üë® Arnold - Í∞ïÎ†¨Ìïú ÎÇ®ÏÑ±</option>
                                <option value="pNInz6obpgDQGcFmaJgB">üë® Adam - Îâ¥Ïä§ ÏïµÏª§Ìíç</option>
                                <option value="yoZ06aMxZJJ28mfd3POQ">üë® Sam - ÎÇ¥Î†àÏù¥ÏÖòÌíç</option>
                            </select>
                        </div>

                        <div class="setting-item">
                            <label for="model">
                                <i class="fas fa-cogs"></i>
                                AI Î™®Îç∏
                            </label>
                            <select id="model" class="custom-select">
                                <option value="eleven_monolingual_v1">English v1 (ÏïàÏ†ïÏ†Å)</option>
                                <option value="eleven_multilingual_v1">Multilingual v1</option>
                                <option value="eleven_multilingual_v2" selected>Multilingual v2 (ÏµúÏã†)</option>
                                <option value="eleven_turbo_v2">Turbo v2 (Í≥†ÏÜç)</option>
                            </select>
                        </div>

                        <div class="setting-item">
                            <label for="stability">
                                <i class="fas fa-balance-scale"></i>
                                Stability (ÏïàÏ†ïÏÑ±)
                            </label>
                            <div class="range-container">
                                <input type="range" id="stability" class="custom-range" min="0" max="1" step="0.1" value="0.5"
                                       oninput="updateRangeValue('stability', 'stabilityValue')">
                                <div class="range-value" id="stabilityValue">0.5</div>
                            </div>
                            <div class="setting-description">ÎÇÆÏùå = Îçî ÌëúÌòÑÎ†•, ÎÜíÏùå = Îçî ÏïàÏ†ïÏ†Å</div>
                        </div>

                        <div class="setting-item">
                            <label for="similarity">
                                <i class="fas fa-fingerprint"></i>
                                Similarity (Ïú†ÏÇ¨ÏÑ±)
                            </label>
                            <div class="range-container">
                                <input type="range" id="similarity" class="custom-range" min="0" max="1" step="0.1" value="0.5"
                                       oninput="updateRangeValue('similarity', 'similarityValue')">
                                <div class="range-value" id="similarityValue">0.5</div>
                            </div>
                            <div class="setting-description">ÏõêÎ≥∏ ÏùåÏÑ± ÌäπÏÑ± Ïú†ÏßÄ Ï†ïÎèÑ</div>
                        </div>

                        <div class="setting-item">
                            <label for="style">
                                <i class="fas fa-theater-masks"></i>
                                Style (Í∞êÏ†ï ÌëúÌòÑ)
                            </label>
                            <div class="range-container">
                                <input type="range" id="style" class="custom-range" min="0" max="1" step="0.1" value="0.0"
                                       oninput="updateRangeValue('style', 'styleValue')">
                                <div class="range-value" id="styleValue">0.0</div>
                            </div>
                            <div class="setting-description">0 = ÏûêÏó∞Ïä§ÎüΩÍ≤å, 1 = Í∑πÎèÑÎ°ú Í∞êÏ†ïÏ†Å</div>
                        </div>

                        <div class="setting-item">
                            <label style="margin-bottom: 15px;">
                                <i class="fas fa-volume-up"></i>
                                Ï∂îÍ∞Ä ÏòµÏÖò
                            </label>
                            <div class="service-item">
                                <input type="checkbox" id="speakerBoost" class="service-checkbox" checked>
                                <label for="speakerBoost" class="service-label">
                                    <i class="fas fa-magic service-icon"></i>
                                    <div>
                                        <div>Speaker Boost</div>
                                        <small style="opacity: 0.8;">ÏùåÏÑ± ÌíàÏßà Ìñ•ÏÉÅ</small>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- üöÄ OpenAI TTS ÏÑ§Ï†ï Ìå®ÎÑê (NEW!) -->
            <div id="openaiSettings" class="settings-panel" style="display: none;">
                <div class="settings-header" onclick="togglePanel('openaiSettings')">
                    <div class="settings-title">
                        <i class="fas fa-robot openai-icon"></i>
                        OpenAI TTS ÏÑ§Ï†ï üöÄ
                    </div>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </div>
                <div class="settings-content">
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label for="openaiVoice">
                                <i class="fas fa-user-astronaut"></i>
                                AI ÏùåÏÑ± ÏÑ†ÌÉù
                            </label>
                            <select id="openaiVoice" class="custom-select">
                                <option value="alloy" selected>üé≠ Alloy - Í∑†Ìòï Ïû°Ìûå Ï§ëÏÑ±Ï†Å</option>
                                <option value="echo">üéµ Echo - ÎÇ®ÏÑ±Ï†ÅÏù¥Í≥† ÍπäÏùÄ</option>
                                <option value="fable">üí´ Fable - Îî∞ÎúªÌïòÍ≥† ÏπúÍ∑ºÌïú</option>
                                <option value="onyx">‚ö° Onyx - Í∞ïÎ†¨ÌïòÍ≥† Ïπ¥Î¶¨Ïä§Îßà</option>
                                <option value="nova">‚ú® Nova - ÌôúÍ∏∞Ï∞®Í≥† ÌòÑÎåÄÏ†Å</option>
                                <option value="shimmer">üåü Shimmer - Î∂ÄÎìúÎüΩÍ≥† Ïö∞ÏïÑÌïú</option>
                            </select>
                            <div class="setting-description">OpenAI GPTÍ∞Ä ÎßåÎì† ÏµúÍ≥† ÌíàÏßàÏùò AI ÏùåÏÑ±Îì§</div>
                        </div>

                        <div class="setting-item">
                            <label for="openaiModel">
                                <i class="fas fa-brain"></i>
                                AI Î™®Îç∏
                            </label>
                            <select id="openaiModel" class="custom-select">
                                <option value="tts-1" selected>‚ö° TTS-1 (Îπ†Î¶Ñ)</option>
                                <option value="tts-1-hd">üíé TTS-1-HD (Í≥†ÌíàÏßà)</option>
                            </select>
                            <div class="setting-description">TTS-1ÏùÄ Îπ†Î¶Ñ, TTS-1-HDÎäî ÏµúÍ≥† ÌíàÏßà</div>
                        </div>

                        <div class="setting-item">
                            <label for="openaiSpeed">
                                <i class="fas fa-tachometer-alt"></i>
                                ÏùåÏÑ± ÏÜçÎèÑ
                            </label>
                            <div class="range-container">
                                <input type="range" id="openaiSpeed" class="custom-range" min="0.25" max="4.0" step="0.25" value="1.0"
                                       oninput="updateRangeValue('openaiSpeed', 'openaiSpeedValue')">
                                <div class="range-value" id="openaiSpeedValue">1.0</div>
                            </div>
                            <div class="setting-description">0.25x = Îß§Ïö∞ ÎäêÎ¶º, 1.0x = Î≥¥ÌÜµ, 4.0x = Îß§Ïö∞ Îπ†Î¶Ñ</div>
                        </div>

                        <div class="setting-item">
                            <label for="openaiFormat">
                                <i class="fas fa-file-audio"></i>
                                Ïò§ÎîîÏò§ Ìè¨Îß∑
                            </label>
                            <select id="openaiFormat" class="custom-select">
                                <option value="mp3" selected>üéµ MP3 (Ìò∏ÌôòÏÑ± ÏµúÍ≥†)</option>
                                <option value="opus">üéº OPUS (Ïä§Ìä∏Î¶¨Î∞ç ÏµúÏ†ÅÌôî)</option>
                                <option value="aac">üçé AAC (Apple ÏµúÏ†ÅÌôî)</option>
                                <option value="flac">üíé FLAC (Î¨¥ÏÜêÏã§ ÏïïÏ∂ï)</option>
                            </select>
                            <div class="setting-description">Ïö©ÎèÑÏóê ÎßûÎäî Ïò§ÎîîÏò§ Ìè¨Îß∑ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</div>
                        </div>
                    </div>
                </div>
            </div>

            <button type="submit" class="generate-btn" id="generateBtn">
                <i class="fas fa-magic"></i>
                <span>AI ÏùåÏÑ± ÏÉùÏÑ±ÌïòÍ∏∞</span>
            </button>
        </form>
    </div>

    <!-- Í≤∞Í≥º ÌëúÏãú ÏòÅÏó≠ -->
    <div id="results" class="results" style="display: none;">
        <h3><i class="fas fa-headphones"></i> ÏÉùÏÑ±Îêú ÏùåÏÑ± ÌååÏùºÎì§</h3>
        <div id="resultsList"></div>
        <button class="cleanup-btn" onclick="cleanupFiles()" id="cleanupBtn" style="display: none;">
            <i class="fas fa-trash-alt"></i>
            Î™®Îì† ÌååÏùº Ï†ïÎ¶¨
        </button>
    </div>
</div>

<script>
    // Ï∫êÎ¶≠ÌÑ∞ Ïπ¥Ïö¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
    function updateCharCounter() {
        const textArea = document.getElementById('text');
        const charCount = document.getElementById('charCount');

        textArea.addEventListener('input', () => {
            charCount.textContent = textArea.value.length;

            if (textArea.value.length > 3500) {
                charCount.style.color = 'var(--warning)';
            } else if (textArea.value.length > 4000) {
                charCount.style.color = 'var(--error)';
            } else {
                charCount.style.color = 'var(--accent)';
            }
        });
    }

    // ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
    function updateStats() {
        const totalGenerated = localStorage.getItem('totalGenerated') || 0;
        document.getElementById('totalGenerated').textContent = totalGenerated;
    }

    // DOM Î°úÎìú ÏôÑÎ£å ÌõÑ Ïã§Ìñâ
    document.addEventListener('DOMContentLoaded', function() {
        updateCharCounter();
        updateStats();

        const form = document.getElementById('ttsForm');

        if (!form) {
            console.error('ÌèºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§!');
            return;
        }

        // Ìèº Ï†úÏ∂ú Ïù¥Î≤§Ìä∏ Ï≤òÎ¶¨
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const text = document.getElementById('text').value.trim();
            const globalCount = parseInt(document.getElementById('count').value);
            const services = [];

            // ÏÑúÎπÑÏä§Î≥Ñ ÏÑ§Ï†ï ÏàòÏßë
            const settings = {};

            if (document.getElementById('google').checked) {
                services.push('google');
                settings.google = {
                    language: document.getElementById('googleLang').value,
                    slow: document.getElementById('googleSlow').value === 'true',
                    count: 1
                };
            }

            if (document.getElementById('elevenlabs').checked) {
                services.push('elevenlabs');
                settings.elevenlabs = {
                    voice_id: document.getElementById('voice').value,
                    model_id: document.getElementById('model').value,
                    stability: parseFloat(document.getElementById('stability').value),
                    similarity_boost: parseFloat(document.getElementById('similarity').value),
                    style: parseFloat(document.getElementById('style').value),
                    use_speaker_boost: document.getElementById('speakerBoost').checked,
                    count: globalCount
                };
            }

            // üöÄ OpenAI TTS ÏÑ§Ï†ï Ï∂îÍ∞Ä (NEW!)
            if (document.getElementById('openai').checked) {
                services.push('openai');
                settings.openai = {
                    voice: document.getElementById('openaiVoice').value,
                    model: document.getElementById('openaiModel').value,
                    speed: parseFloat(document.getElementById('openaiSpeed').value),
                    response_format: document.getElementById('openaiFormat').value,
                    count: globalCount
                };
            }

            // ÏûÖÎ†• Í≤ÄÏ¶ù
            if (!text) {
                showMessage('ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî', 'error');
                return;
            }

            if (services.length === 0) {
                showMessage('AI ÏÑúÎπÑÏä§Î•º ÌïòÎÇò Ïù¥ÏÉÅ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî', 'error');
                return;
            }

            if (text.length > 4096) {
                showMessage('ÌÖçÏä§Ìä∏Í∞Ä ÎÑàÎ¨¥ ÍπÅÎãàÎã§. 4096Ïûê Ïù¥ÌïòÎ°ú ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî', 'error');
                return;
            }

            const generateBtn = document.getElementById('generateBtn');
            const resultsDiv = document.getElementById('results');

            // Î≤ÑÌäº ÏÉÅÌÉú Î≥ÄÍ≤Ω
            generateBtn.disabled = true;
            generateBtn.innerHTML = '<div class="spinner"></div><span>AI ÏùåÏÑ± ÏÉùÏÑ± Ï§ë...</span>';
            if (resultsDiv) resultsDiv.style.display = 'none';

            try {
                const response = await fetch('/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ text, count: globalCount, services, settings })
                });

                const data = await response.json();

                if (response.ok) {
                    console.log('ÏùåÏÑ± ÏÉùÏÑ± ÏÑ±Í≥µ:', data);
                    displayResults(data.results);

                    // ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
                    const currentTotal = parseInt(localStorage.getItem('totalGenerated') || 0);
                    const successCount = data.results.filter(r => r.success).length;
                    localStorage.setItem('totalGenerated', currentTotal + successCount);
                    updateStats();
                } else {
                    showMessage(data.error || 'Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
                }
            } catch (error) {
                console.error('ÎÑ§Ìä∏ÏõåÌÅ¨ Ïò§Î•ò:', error);
                showMessage('ÏÑúÎ≤Ñ Ïó∞Í≤∞Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§', 'error');
            } finally {
                generateBtn.disabled = false;
                generateBtn.innerHTML = '<i class="fas fa-magic"></i><span>AI ÏùåÏÑ± ÏÉùÏÑ±ÌïòÍ∏∞</span>';
            }
        });

        // Ï¥àÍ∏∞ ÏÑ§Ï†ï Ìå®ÎÑê ÌëúÏãú
        toggleSettings();
    });

    // Î©îÏãúÏßÄ ÌëúÏãú
    function showMessage(message, type) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${type}-message fade-in`;
        messageDiv.innerHTML = `
                <i class="fas fa-${type === 'error' ? 'exclamation-triangle' : 'check-circle'}"></i>
                ${message}
            `;

        document.querySelector('.form-container').appendChild(messageDiv);

        setTimeout(() => {
            messageDiv.remove();
        }, 4000);
    }

    // ÏÑúÎπÑÏä§ ÏÑ†ÌÉùÏóê Îî∞Î•∏ ÏÑ§Ï†ï Ìå®ÎÑê ÌëúÏãú/Ïà®ÍπÄ
    function toggleSettings() {
        const googleChecked = document.getElementById('google').checked;
        const elevenlabsChecked = document.getElementById('elevenlabs').checked;
        const openaiChecked = document.getElementById('openai').checked;

        document.getElementById('googleSettings').style.display = googleChecked ? 'block' : 'none';
        document.getElementById('elevenlabsSettings').style.display = elevenlabsChecked ? 'block' : 'none';
        document.getElementById('openaiSettings').style.display = openaiChecked ? 'block' : 'none';
    }

    // ÏÑ§Ï†ï Ìå®ÎÑê Ï†ëÍ∏∞/ÌéºÏπòÍ∏∞
    function togglePanel(panelId) {
        const panel = document.getElementById(panelId);
        const content = panel.querySelector('.settings-content');
        const icon = panel.querySelector('.toggle-icon');

        content.classList.toggle('active');
        icon.classList.toggle('active');
    }

    // Ïä¨ÎùºÏù¥Îçî Í∞í ÏóÖÎç∞Ïù¥Ìä∏
    function updateRangeValue(rangeId, valueId) {
        const range = document.getElementById(rangeId);
        const valueSpan = document.getElementById(valueId);
        valueSpan.textContent = range.value;
    }

    // Í≤∞Í≥º ÌëúÏãú
    function displayResults(results) {
        const resultsDiv = document.getElementById('results');
        const resultsListDiv = document.getElementById('resultsList');
        const cleanupBtn = document.getElementById('cleanupBtn');

        if (!resultsDiv || !resultsListDiv) {
            console.error('Í≤∞Í≥º ÌëúÏãú ÏöîÏÜåÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§!');
            return;
        }

        resultsListDiv.innerHTML = '';
        let totalSuccessCount = 0;

        // ÏÑúÎπÑÏä§Î≥ÑÎ°ú Í∑∏Î£πÌïë
        const groupedResults = {
            google: results.filter(r => r.service && r.service.toLowerCase().includes('google')),
            elevenlabs: results.filter(r => r.service && r.service.toLowerCase().includes('elevenlabs')),
            openai: results.filter(r => r.service && r.service.toLowerCase().includes('openai'))  // üöÄ NEW!
        };

        // ÏÑ±Í≥µ Î©îÏãúÏßÄ Î®ºÏ†Ä ÌëúÏãú
        const successCount = results.filter(r => r.success).length;
        if (successCount > 0) {
            const successMsg = document.createElement('div');
            successMsg.className = 'message success-message';
            successMsg.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    ${successCount}Í∞úÏùò AI ÏùåÏÑ±Ïù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§
                `;
            resultsListDiv.appendChild(successMsg);
            totalSuccessCount = successCount;
        }

        // Google TTS Í∑∏Î£π ÌëúÏãú
        if (groupedResults.google.length > 0) {
            const googleGroup = document.createElement('div');
            googleGroup.className = 'service-group';

            const googleSuccessCount = groupedResults.google.filter(r => r.success).length;

            googleGroup.innerHTML = `
                    <div class="service-group-header">
                        <div class="service-group-title">
                            <i class="fab fa-google" style="color: var(--accent);"></i>
                            Google TTS
                            <span class="service-group-count">${googleSuccessCount}/${groupedResults.google.length}</span>
                        </div>
                    </div>
                    <div class="service-group-content"></div>
                `;

            const googleContent = googleGroup.querySelector('.service-group-content');

            groupedResults.google.forEach((result, index) => {
                const resultItem = createResultItem(result, index);
                googleContent.appendChild(resultItem);
            });

            resultsListDiv.appendChild(googleGroup);
        }

        // ElevenLabs Í∑∏Î£π ÌëúÏãú
        if (groupedResults.elevenlabs.length > 0) {
            const elevenlabsGroup = document.createElement('div');
            elevenlabsGroup.className = 'service-group';

            const elevenlabsSuccessCount = groupedResults.elevenlabs.filter(r => r.success).length;

            elevenlabsGroup.innerHTML = `
                    <div class="service-group-header">
                        <div class="service-group-title">
                            <i class="fas fa-brain" style="color: var(--accent);"></i>
                            ElevenLabs AI
                            <span class="service-group-count">${elevenlabsSuccessCount}/${groupedResults.elevenlabs.length}</span>
                        </div>
                    </div>
                    <div class="service-group-content"></div>
                `;

            const elevenlabsContent = elevenlabsGroup.querySelector('.service-group-content');

            groupedResults.elevenlabs.forEach((result, index) => {
                const resultItem = createResultItem(result, index);
                elevenlabsContent.appendChild(resultItem);
            });

            resultsListDiv.appendChild(elevenlabsGroup);
        }

        // üöÄ OpenAI TTS Í∑∏Î£π ÌëúÏãú (NEW!)
        if (groupedResults.openai.length > 0) {
            const openaiGroup = document.createElement('div');
            openaiGroup.className = 'service-group';

            const openaiSuccessCount = groupedResults.openai.filter(r => r.success).length;

            openaiGroup.innerHTML = `
                    <div class="service-group-header">
                        <div class="service-group-title">
                            <i class="fas fa-robot openai-icon" style="color: var(--openai);"></i>
                            OpenAI TTS üöÄ
                            <span class="service-group-count openai-count">${openaiSuccessCount}/${groupedResults.openai.length}</span>
                        </div>
                    </div>
                    <div class="service-group-content"></div>
                `;

            const openaiContent = openaiGroup.querySelector('.service-group-content');

            groupedResults.openai.forEach((result, index) => {
                const resultItem = createResultItem(result, index, true); // true = isOpenAI
                openaiContent.appendChild(resultItem);
            });

            resultsListDiv.appendChild(openaiGroup);
        }

        resultsDiv.style.display = 'block';
        resultsDiv.classList.add('fade-in');

        // Ï†ïÎ¶¨ Î≤ÑÌäº ÌëúÏãú
        if (cleanupBtn && totalSuccessCount > 0) {
            cleanupBtn.style.display = 'flex';
        }
    }

    // Í∞úÎ≥Ñ Í≤∞Í≥º ÏïÑÏù¥ÌÖú ÏÉùÏÑ±
    function createResultItem(result, index, isOpenAI = false) {
        const resultItem = document.createElement('div');
        resultItem.className = 'result-item';

        if (result.success) {
            const fileId = result.file_id;
            const tagClass = isOpenAI ? 'openai-tag' : '';

            resultItem.innerHTML = `
                    <div style="margin-bottom: 20px;">
                        <span class="service-tag ${tagClass}">
                            <i class="fas fa-${isOpenAI ? 'robot' : 'robot'}"></i>
                            ${result.service}
                        </span>
                    </div>
                    <audio controls preload="metadata" class="audio-player">
                        <source src="/play/${fileId}" type="audio/mpeg">
                        Î∏åÎùºÏö∞Ï†ÄÍ∞Ä Ïò§ÎîîÏò§Î•º ÏßÄÏõêÌïòÏßÄ ÏïäÏäµÎãàÎã§.
                    </audio>
                    <div class="control-buttons">
                        <button class="control-btn download-btn" onclick="downloadFile('${fileId}')">
                            <i class="fas fa-download"></i>
                            Îã§Ïö¥Î°úÎìú
                        </button>
                        <button class="control-btn play-btn" onclick="playAudio('${fileId}')">
                            <i class="fas fa-external-link-alt"></i>
                            ÏÉà Ï∞ΩÏóêÏÑú Ïû¨ÏÉù
                        </button>
                    </div>
                `;
        } else {
            resultItem.innerHTML = `
                    <div class="message error-message">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>${result.service}</strong> ÏÉùÏÑ± Ïã§Ìå®: ${result.error}
                    </div>
                `;
        }

        return resultItem;
    }

    // ÌååÏùº Îã§Ïö¥Î°úÎìú
    function downloadFile(fileId) {
        try {
            const link = document.createElement('a');
            link.href = `/download/${fileId}`;
            link.download = `ai_voice_${fileId}.mp3`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            showMessage('Îã§Ïö¥Î°úÎìúÍ∞Ä ÏãúÏûëÎêòÏóàÏäµÎãàÎã§', 'success');
        } catch (error) {
            console.error('Îã§Ïö¥Î°úÎìú Ïò§Î•ò:', error);
            showMessage('ÌååÏùº Îã§Ïö¥Î°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
        }
    }

    // Ïò§ÎîîÏò§ Ïû¨ÏÉù (Î≥ÑÎèÑ Ï∞ΩÏóêÏÑú)
    function playAudio(fileId) {
        try {
            const audioUrl = `/play/${fileId}`;
            window.open(audioUrl, '_blank');
        } catch (error) {
            console.error('Ïû¨ÏÉù Ïò§Î•ò:', error);
            showMessage('Ïò§ÎîîÏò§ Ïû¨ÏÉù Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
        }
    }

    // ÌååÏùº Ï†ïÎ¶¨
    async function cleanupFiles() {
        if (!confirm('Î™®Îì† ÏÉùÏÑ±Îêú ÌååÏùºÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
            return;
        }

        try {
            const response = await fetch('/cleanup', { method: 'POST' });

            if (!response.ok) {
                throw new Error('ÏÑúÎ≤Ñ ÏùëÎãµ Ïò§Î•ò');
            }

            const data = await response.json();
            showMessage(data.message || 'Î™®Îì† ÌååÏùºÏù¥ Ï†ïÎ¶¨ÎêòÏóàÏäµÎãàÎã§', 'success');

            const resultsDiv = document.getElementById('results');
            const cleanupBtn = document.getElementById('cleanupBtn');

            if (resultsDiv) resultsDiv.style.display = 'none';
            if (cleanupBtn) cleanupBtn.style.display = 'none';

        } catch (error) {
            console.error('ÌååÏùº Ï†ïÎ¶¨ Ïò§Î•ò:', error);
            showMessage('ÌååÏùº Ï†ïÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
        }
    }
</script>
</body>
</html>